!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(n="undefined"!=typeof globalThis?globalThis:n||self).MemoTalk=e()}(this,(function(){"use strict";var n=Array.isArray,e=Array.from,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyDescriptors,o=Object.prototype,i=Array.prototype,u=Object.getPrototypeOf;const a=()=>{};function s(n){return n()}function f(n){for(var e=0;e<n.length;e++)n[e]()}const c=32,v=256,d=512,p=1024,h=2048,m=4096,g=8192,y=16384,_=65536,w=1<<20,b=Symbol("$state"),x=Symbol("legacy props"),S=Symbol("");function E(n){return n===this.v}function k(n,e){return n!=n?e==e:n!==e||null!==n&&"object"==typeof n||"function"==typeof n}function O(n){return!k(n,this.v)}let N=!1;const $=Symbol();function j(n,e){return{f:0,v:n,reactions:null,equals:E,version:0}}function M(n,e=!1){var t;const r=j(n);return e||(r.equals=O),N&&null!==Fn&&null!==Fn.l&&((t=Fn.l).s??(t.s=[])).push(r),r}function P(n){return null!==Mn&&2&Mn.f&&(null===Dn?Dn=[n]:Dn.push(n)),n}function T(n,e){return null!==Mn&&Jn()&&18&Mn.f&&(null===Dn||!Dn.includes(n))&&function(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}(),A(n,e)}function A(n,e){return n.equals(e)||(n.v=e,n.version=In(),D(n,h),Jn()&&null!==Tn&&Tn.f&p&&!(Tn.f&c)&&(null!==qn&&qn.includes(n)?(re(Tn,h),Un(Tn)):null===Ln?function(n){Ln=n}([n]):Ln.push(n))),e}function D(n,e){var t=n.reactions;if(null!==t)for(var r=Jn(),l=t.length,o=0;o<l;o++){var i=t[o],u=i.f;u&h||(r||i!==Tn)&&(re(i,e),1280&u&&(2&u?D(i,m):Un(i)))}}let q=!1;function C(e,t=null,l){if("object"!=typeof e||null===e||b in e)return e;const a=u(e);if(a!==o&&a!==i)return e;var s,f=new Map,c=n(e),v=j(0);return c&&f.set("length",j(e.length)),new Proxy(e,{defineProperty(n,e,t){"value"in t&&!1!==t.configurable&&!1!==t.enumerable&&!1!==t.writable||function(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}();var r=f.get(e);return void 0===r?(r=j(t.value),f.set(e,r)):T(r,C(t.value,s)),!0},deleteProperty(n,e){var t=f.get(e);if(void 0===t)e in n&&f.set(e,j($));else{if(c&&"string"==typeof e){var r=f.get("length"),l=Number(e);Number.isInteger(l)&&l<r.v&&T(r,l)}T(t,$),L(v)}return!0},get(n,t,l){var o;if(t===b)return e;var i=f.get(t),u=t in n;if(void 0!==i||u&&!(null==(o=r(n,t))?void 0:o.writable)||(i=j(C(u?n[t]:$,s)),f.set(t,i)),void 0!==i){var a=ne(i);return a===$?void 0:a}return Reflect.get(n,t,l)},getOwnPropertyDescriptor(n,e){var t=Reflect.getOwnPropertyDescriptor(n,e);if(t&&"value"in t){var r=f.get(e);r&&(t.value=ne(r))}else if(void 0===t){var l=f.get(e),o=null==l?void 0:l.v;if(void 0!==l&&o!==$)return{enumerable:!0,configurable:!0,value:o,writable:!0}}return t},has(n,e){var t;if(e===b)return!0;var l=f.get(e),o=void 0!==l&&l.v!==$||Reflect.has(n,e);if((void 0!==l||null!==Tn&&(!o||(null==(t=r(n,e))?void 0:t.writable)))&&(void 0===l&&(l=j(o?C(n[e],s):$),f.set(e,l)),ne(l)===$))return!1;return o},set(n,e,t,l){var o,i=f.get(e),u=e in n;if(c&&"length"===e)for(var a=t;a<i.v;a+=1){var d=f.get(a+"");void 0!==d?T(d,$):a in n&&(d=j($),f.set(a+"",d))}void 0===i?u&&!(null==(o=r(n,e))?void 0:o.writable)||(T(i=j(void 0),C(t,s)),f.set(e,i)):(u=i.v!==$,T(i,C(t,s)));var p=Reflect.getOwnPropertyDescriptor(n,e);if((null==p?void 0:p.set)&&p.set.call(l,t),!u){if(c&&"string"==typeof e){var h=f.get("length"),m=Number(e);Number.isInteger(m)&&m>=h.v&&T(h,m+1)}L(v)}return!0},ownKeys(n){ne(v);var e=Reflect.ownKeys(n).filter((n=>{var e=f.get(n);return void 0===e||e.v!==$}));for(var[t,r]of f)r.v===$||t in n||e.push(t);return e},setPrototypeOf(){!function(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}()}})}function L(n,e=1){T(n,n.v+e)}var R,z,F;function I(n=""){return document.createTextNode(n)}function J(n){return z.call(n)}function V(n){return F.call(n)}function B(n,e){return J(n)}function H(n,e){var t=J(n);return t instanceof Comment&&""===t.data?V(t):t}function K(n,e=1,t=!1){let r=n;for(;e--;)r=V(r);return r}function W(n){var e=2050;null===Tn?e|=v:Tn.f|=w;var t=null!==Mn&&2&Mn.f?Mn:null;const r={children:null,ctx:Fn,deps:null,equals:E,f:e,fn:n,reactions:null,v:null,version:0,parent:t??Tn};return null!==t&&(t.children??(t.children=[])).push(r),r}function Z(n){const e=W(n);return e.equals=O,e}function Y(n){var e=n.children;if(null!==e){n.children=null;for(var t=0;t<e.length;t+=1){var r=e[t];2&r.f?U(r):cn(r)}}}function G(n){var e,t=Tn;An(function(n){for(var e=n.parent;null!==e;){if(!(2&e.f))return e;e=e.parent}return null}(n));try{Y(n),e=Hn(n)}finally{An(t)}return e}function Q(n){var e=G(n);re(n,(zn||n.f&v)&&null!==n.deps?m:p),n.equals(e)||(n.v=e,n.version=In())}function U(n){Y(n),Wn(n,0),re(n,y),n.v=n.children=n.deps=n.ctx=n.reactions=null}function X(n){null===Tn&&null===Mn&&function(){throw new Error("https://svelte.dev/e/effect_orphan")}(),null!==Mn&&Mn.f&v&&function(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}(),kn&&function(){throw new Error("https://svelte.dev/e/effect_in_teardown")}()}function nn(n,e,t,r=!0){var l=!!(64&n),o=Tn,i={ctx:Fn,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:n|h,first:null,fn:e,last:null,next:null,parent:l?null:o,prev:null,teardown:null,transitions:null,version:0};if(t){var u=En;try{On(!0),Zn(i),i.f|=32768}catch(s){throw cn(i),s}finally{On(u)}}else null!==e&&Un(i);if(!(t&&null===i.deps&&null===i.first&&null===i.nodes_start&&null===i.teardown&&!(i.f&w))&&!l&&r&&(null!==o&&function(n,e){var t=e.last;null===t?e.last=e.first=n:(t.next=n,n.prev=t,e.last=n)}(i,o),null!==Mn&&2&Mn.f)){var a=Mn;(a.children??(a.children=[])).push(i)}return i}function en(n){if(X(),!(null!==Tn&&!!(Tn.f&c)&&null!==Fn&&!Fn.m))return tn(n);var e=Fn;(e.e??(e.e=[])).push({fn:n,effect:Tn,reaction:Mn})}function tn(n){return nn(4,n,!1)}function rn(n){return nn(8,n,!0)}function ln(n){return on(n)}function on(n,e=0){return nn(24|e,n,!0)}function un(n,e=!0){return nn(40,n,!0,e)}function an(n){var e=n.teardown;if(null!==e){const n=kn,t=Mn;Nn(!0),Pn(null);try{e.call(null)}finally{Nn(n),Pn(t)}}}function sn(n){var e=n.deriveds;if(null!==e){n.deriveds=null;for(var t=0;t<e.length;t+=1)U(e[t])}}function fn(n,e=!1){var t=n.first;for(n.first=n.last=null;null!==t;){var r=t.next;cn(t,e),t=r}}function cn(n,e=!0){var t=!1;if((e||524288&n.f)&&null!==n.nodes_start){for(var r=n.nodes_start,l=n.nodes_end;null!==r;){var o=r===l?null:V(r);r.remove(),r=o}t=!0}fn(n,e&&!t),sn(n),Wn(n,0),re(n,y);var i=n.transitions;if(null!==i)for(const a of i)a.stop();an(n);var u=n.parent;null!==u&&null!==u.first&&vn(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes_start=n.nodes_end=null}function vn(n){var e=n.parent,t=n.prev,r=n.next;null!==t&&(t.next=r),null!==r&&(r.prev=t),null!==e&&(e.first===n&&(e.first=r),e.last===n&&(e.last=t))}function dn(n,e){var t=[];hn(n,t,!0),pn(t,(()=>{cn(n),e&&e()}))}function pn(n,e){var t=n.length;if(t>0){var r=()=>--t||e();for(var l of n)l.out(r)}else e()}function hn(n,e,t){if(!(n.f&g)){if(n.f^=g,null!==n.transitions)for(const r of n.transitions)(r.is_global||t)&&e.push(r);for(var r=n.first;null!==r;){var l=r.next;hn(r,e,!!(!!(r.f&_)||!!(r.f&c))&&t),r=l}}}function mn(n){gn(n,!0)}function gn(n,e){if(n.f&g){Vn(n)&&Zn(n),n.f^=g;for(var t=n.first;null!==t;){var r=t.next;gn(t,!!(!!(t.f&_)||!!(t.f&c))&&e),t=r}if(null!==n.transitions)for(const t of n.transitions)(t.is_global||e)&&t.in()}}let yn=!1,_n=[];function wn(){yn=!1;const n=_n.slice();_n=[],f(n)}let bn=!1,xn=!1,Sn=null,En=!1,kn=!1;function On(n){En=n}function Nn(n){kn=n}let $n=[],jn=0,Mn=null;function Pn(n){Mn=n}let Tn=null;function An(n){Tn=n}let Dn=null;let qn=null,Cn=0,Ln=null;let Rn=1,zn=!1,Fn=null;function In(){return++Rn}function Jn(){return!N||null!==Fn&&null===Fn.l}function Vn(n){var e,t,r=n.f;if(r&h)return!0;if(r&m){var l=n.deps,o=!!(r&v);if(null!==l){var i;if(r&d){for(i=0;i<l.length;i++)((e=l[i]).reactions??(e.reactions=[])).push(n);n.f^=d}for(i=0;i<l.length;i++){var u=l[i];if(Vn(u)&&Q(u),!o||null===Tn||zn||(null==(t=null==u?void 0:u.reactions)?void 0:t.includes(n))||(u.reactions??(u.reactions=[])).push(n),u.version>n.version)return!0}}o&&(null===Tn||zn)||re(n,p)}return!1}function Bn(n,e,t,r){if(bn){if(null===t&&(bn=!1),function(n){return!(n.f&y||null!==n.parent&&128&n.parent.f)}(e))throw n}else null!==t&&(bn=!0),function(n,e){for(var t=e;null!==t;){if(128&t.f)try{return void t.fn(n)}catch{t.f^=128}t=t.parent}throw bn=!1,n}(n,e)}function Hn(n){var e,t=qn,r=Cn,l=Ln,o=Mn,i=zn,u=Dn,a=Fn,s=n.f;qn=null,Cn=0,Ln=null,Mn=96&s?null:n,zn=!En&&!!(s&v),Dn=null,Fn=n.ctx;try{var f=(0,n.fn)(),c=n.deps;if(null!==qn){var d;if(Wn(n,Cn),null!==c&&Cn>0)for(c.length=Cn+qn.length,d=0;d<qn.length;d++)c[Cn+d]=qn[d];else n.deps=c=qn;if(!zn)for(d=Cn;d<c.length;d++)((e=c[d]).reactions??(e.reactions=[])).push(n)}else null!==c&&Cn<c.length&&(Wn(n,Cn),c.length=Cn);return f}finally{qn=t,Cn=r,Ln=l,Mn=o,zn=i,Dn=u,Fn=a}}function Kn(n,e){let t=e.reactions;if(null!==t){var r=t.indexOf(n);if(-1!==r){var l=t.length-1;0===l?t=e.reactions=null:(t[r]=t[l],t.pop())}}null===t&&2&e.f&&(null===qn||!qn.includes(e))&&(re(e,m),768&e.f||(e.f^=d),Wn(e,0))}function Wn(n,e){var t=n.deps;if(null!==t)for(var r=e;r<t.length;r++)Kn(n,t[r])}function Zn(n){var e=n.f;if(!(e&y)){re(n,p);var t=Tn,r=Fn;Tn=n;try{16&e?function(n){for(var e=n.first;null!==e;){var t=e.next;e.f&c||cn(e),e=t}}(n):fn(n),sn(n),an(n);var l=Hn(n);n.teardown="function"==typeof l?l:null,n.version=Rn}catch(o){Bn(o,n,t,r||n.ctx)}finally{Tn=t}}}function Yn(){if(jn>1e3){jn=0;try{!function(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}()}catch(n){if(null===Sn)throw n;Bn(n,Sn,null)}}jn++}function Gn(n){var e=n.length;if(0!==e)for(var t=0;t<e;t++){var r=n[t];if(!(24576&r.f))try{Vn(r)&&(Zn(r),null===r.deps&&null===r.first&&null===r.nodes_start&&(null===r.teardown?vn(r):r.fn=null))}catch(l){Bn(l,r,null,r.ctx)}}}function Qn(){if(xn=!1,jn>1001)return;const n=$n;$n=[],function(n){var e=n.length;if(0!==e){Yn();var t=En;En=!0;try{for(var r=0;r<e;r++){var l=n[r];l.f&p||(l.f^=p);var o=[];Xn(l,o),Gn(o)}}finally{En=t}}}(n),xn||(jn=0,Sn=null)}function Un(n){xn||(xn=!0,queueMicrotask(Qn)),Sn=n;for(var e=n;null!==e.parent;){var t=(e=e.parent).f;if(96&t){if(!(t&p))return;e.f^=p}}$n.push(e)}function Xn(n,e){var t=n.first,r=[];n:for(;null!==t;){var l=t.f,o=!!(l&c),i=o&&!!(l&p),u=t.next;if(!(i||l&g))if(8&l){if(o)t.f^=p;else try{Vn(t)&&Zn(t)}catch(v){Bn(v,t,null,t.ctx)}var a=t.first;if(null!==a){t=a;continue}}else 4&l&&r.push(t);if(null===u){let e=t.parent;for(;null!==e;){if(n===e)break n;var s=e.next;if(null!==s){t=s;continue n}e=e.parent}}t=u}for(var f=0;f<r.length;f++)a=r[f],e.push(a),Xn(a,e)}function ne(n){var e,t=n.f,r=!!(2&t);if(r&&t&y){var l=G(n);return U(n),l}if(null!==Mn){null!==Dn&&Dn.includes(n)&&function(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}();var o=Mn.deps;null===qn&&null!==o&&o[Cn]===n?Cn++:null===qn?qn=[n]:qn.push(n),null!==Ln&&null!==Tn&&Tn.f&p&&!(Tn.f&c)&&Ln.includes(n)&&(re(Tn,h),Un(Tn))}else if(r&&null===n.deps)for(var i=n,u=i.parent,a=i;null!==u;){if(!(2&u.f)){var s=u;(null==(e=s.deriveds)?void 0:e.includes(a))||(s.deriveds??(s.deriveds=[])).push(a);break}a=u,u=u.parent}return r&&Vn(i=n)&&Q(i),n.v}function ee(n){const e=Mn;try{return Mn=null,n()}finally{Mn=e}}const te=-7169;function re(n,e){n.f=n.f&te|e}function le(n,e=!1,t){Fn={p:Fn,c:null,e:null,m:!1,s:n,x:null,l:null},N&&!e&&(Fn.l={s:null,u:null,r1:[],r2:j(!1)})}function oe(n){const e=Fn;if(null!==e){const n=e.e;if(null!==n){var t=Tn,r=Mn;e.e=null;try{for(var l=0;l<n.length;l++){var o=n[l];An(o.effect),Pn(o.reaction),tn(o.fn)}}finally{An(t),Pn(r)}}Fn=e.p,e.m=!0}return{}}function ie(n,e=new Set){if(!("object"!=typeof n||null===n||n instanceof EventTarget||e.has(n))){e.add(n),n instanceof Date&&n.getTime();for(let l in n)try{ie(n[l],e)}catch(t){}const r=u(n);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const e=l(r);for(let r in e){const l=e[r].get;if(l)try{l.call(n)}catch(t){}}}}}const ue=["touchstart","touchmove"];function ae(n){return ue.includes(n)}let se=!1;function fe(n,e,t,r=t){n.addEventListener(e,(()=>function(n){var e=Mn,t=Tn;Pn(null),An(null);try{return n()}finally{Pn(e),An(t)}}(t)));const l=n.__on_r;n.__on_r=l?()=>{l(),r(!0)}:()=>r(!0),se||(se=!0,document.addEventListener("reset",(n=>{Promise.resolve().then((()=>{var e;if(!n.defaultPrevented)for(const t of n.target.elements)null==(e=t.__on_r)||e.call(t)}))}),{capture:!0}))}const ce=new Set,ve=new Set;function de(n){for(var e=0;e<n.length;e++)ce.add(n[e]);for(var t of ve)t(n)}function pe(e){var r,l=this,o=l.ownerDocument,i=e.type,u=(null==(r=e.composedPath)?void 0:r.call(e))||[],a=u[0]||e.target,s=0,f=e.__root;if(f){var c=u.indexOf(f);if(-1!==c&&(l===document||l===window))return void(e.__root=l);var v=u.indexOf(l);if(-1===v)return;c<=v&&(s=c)}if((a=u[s]||e.target)!==l){t(e,"currentTarget",{configurable:!0,get:()=>a||o});var d=Mn,p=Tn;Pn(null),An(null);try{for(var h,m=[];null!==a;){var g=a.assignedSlot||a.parentNode||a.host||null;try{var y=a["__"+i];if(void 0!==y&&!a.disabled)if(n(y)){var[_,...w]=y;_.apply(a,[e,...w])}else y.call(a,e)}catch(b){h?m.push(b):h=b}if(e.cancelBubble||g===l||null===g)break;a=g}if(h){for(let n of m)queueMicrotask((()=>{throw n}));throw h}}finally{e.__root=l,delete e.currentTarget,Pn(d),An(p)}}}function he(n,e){var t=Tn;null===t.nodes_start&&(t.nodes_start=n,t.nodes_end=e)}function me(n,e){var t,r=!!(1&e),l=!!(2&e),o=!n.startsWith("<!>");return()=>{var e,i;void 0===t&&(e=o?n:"<!>"+n,(i=document.createElement("template")).innerHTML=e,t=i.content,r||(t=J(t)));var u=l?document.importNode(t,!0):t.cloneNode(!0);r?he(J(u),u.lastChild):he(u,u);return u}}function ge(n,e){null!==n&&n.before(e)}function ye(n,e){var t=null==e?"":"object"==typeof e?e+"":e;t!==(n.__t??(n.__t=n.nodeValue))&&(n.__t=t,n.nodeValue=null==t?"":t+"")}function _e(n,t){return function(n,{target:t,anchor:l,props:o={},events:i,context:u,intro:a=!0}){!function(){if(void 0===R){R=window;var n=Element.prototype,e=Node.prototype;z=r(e,"firstChild").get,F=r(e,"nextSibling").get,n.__click=void 0,n.__className="",n.__attributes=null,n.__styles=null,n.__e=void 0,Text.prototype.__t=void 0}}();var s=new Set,f=n=>{for(var e=0;e<n.length;e++){var r=n[e];if(!s.has(r)){s.add(r);var l=ae(r);t.addEventListener(r,pe,{passive:l});var o=we.get(r);void 0===o?(document.addEventListener(r,pe,{passive:l}),we.set(r,1)):we.set(r,o+1)}}};f(e(ce)),ve.add(f);var c=void 0,v=function(n){const e=nn(64,n,!0);return(n={})=>new Promise((t=>{n.outro?dn(e,(()=>{cn(e),t(void 0)})):(cn(e),t(void 0))}))}((()=>{var e=l??t.appendChild(I());return un((()=>{u&&(le({}),Fn.c=u);i&&(o.$$events=i),c=n(e,o)||{},u&&oe()})),()=>{var n;for(var r of s){t.removeEventListener(r,pe);var o=we.get(r);0==--o?(document.removeEventListener(r,pe),we.delete(r)):we.set(r,o)}ve.delete(f),e!==l&&(null==(n=e.parentNode)||n.removeChild(e))}}));return be.set(c,v),c}(n,t)}const we=new Map;let be=new WeakMap;function xe(n,e,t=!1){var r=n,l=null,o=null,i=$,u=!1;const a=(n,e=!0)=>{u=!0,s(e,n)},s=(n,e)=>{i!==(i=n)&&(i?(l?mn(l):e&&(l=un((()=>e(r)))),o&&dn(o,(()=>{o=null}))):(o?mn(o):e&&(o=un((()=>e(r)))),l&&dn(l,(()=>{l=null}))))};on((()=>{u=!1,e(a),u||s(null,null)}),t?_:0)}function Se(n,e){return e}function Ee(t,r,l,o,i,u=null){var a=t,s={flags:r,items:new Map,first:null};!(4&r)||(a=t.appendChild(I()));var f=null,c=!1;on((()=>{var t=l(),v=n(t)?t:null==t?[]:e(t),d=v.length;c&&0===d||(c=0===d,function(n,t,r,l,o,i,u){var a,s,f,c,v,d,p,h,m,y,_=!!(8&o),w=!!(3&o),b=n.length,x=t.items,S=t.first,E=S,k=null,O=[],N=[];if(_)for(y=0;y<b;y+=1)h=u(p=n[y],y),void 0!==(m=x.get(h))&&(null==(a=m.a)||a.measure(),(d??(d=new Set)).add(m));for(y=0;y<b;y+=1)if(h=u(p=n[y],y),void 0!==(m=x.get(h))){if(w&&ke(m,p,y,o),m.e.f&g&&(mn(m.e),_&&(null==(s=m.a)||s.unfix(),(d??(d=new Set)).delete(m))),m!==E){if(void 0!==v&&v.has(m)){if(O.length<N.length){var $,j=N[0];k=j.prev;var M=O[0],P=O[O.length-1];for($=0;$<O.length;$+=1)Ne(O[$],j,r);for($=0;$<N.length;$+=1)v.delete(N[$]);$e(t,M.prev,P.next),$e(t,k,M),$e(t,P,j),E=j,k=P,y-=1,O=[],N=[]}else v.delete(m),Ne(m,E,r),$e(t,m.prev,m.next),$e(t,m,null===k?t.first:k.next),$e(t,k,m),k=m;continue}for(O=[],N=[];null!==E&&E.k!==h;)!i&&E.e.f&g||(v??(v=new Set)).add(E),N.push(E),E=E.next;if(null===E)continue;m=E}O.push(m),k=m,E=m.next}else{k=Oe(E?E.e.nodes_start:r,t,k,null===k?t.first:k.next,p,h,y,l,o),x.set(h,k),O=[],N=[],E=k.next}if(null!==E||void 0!==v){for(var T=void 0===v?[]:e(v);null!==E;)!i&&E.e.f&g||T.push(E),E=E.next;var A=T.length;if(A>0){var D=4&o&&0===b?r:null;if(_){for(y=0;y<A;y+=1)null==(f=T[y].a)||f.measure();for(y=0;y<A;y+=1)null==(c=T[y].a)||c.fix()}!function(n,e,t,r){for(var l=[],o=e.length,i=0;i<o;i++)hn(e[i].e,l,!0);var u=o>0&&0===l.length&&null!==t;if(u){var a=t.parentNode;a.textContent="",a.append(t),r.clear(),$e(n,e[0].prev,e[o-1].next)}pn(l,(()=>{for(var t=0;t<o;t++){var l=e[t];u||(r.delete(l.k),$e(n,l.prev,l.next)),cn(l.e,!u)}}))}(t,T,D,x)}}_&&(q=()=>{var n;if(void 0!==d)for(m of d)null==(n=m.a)||n.apply()},yn||(yn=!0,queueMicrotask(wn)),_n.push(q));var q;Tn.first=t.first&&t.first.e,Tn.last=k&&k.e}(v,s,a,i,r,!!(Mn.f&g),o),null!==u&&(0===d?f?mn(f):f=un((()=>u(a))):null!==f&&dn(f,(()=>{f=null}))),l())}))}function ke(n,e,t,r){1&r&&A(n.v,e),2&r?A(n.i,t):n.i=t}function Oe(n,e,t,r,l,o,i,u,a,s){var f=!!(1&a)?!(16&a)?M(l):j(l):l,c=2&a?j(i):i,v={i:c,v:f,k:o,a:null,e:null,prev:t,next:r};try{return v.e=un((()=>u(n,f,c)),q),v.e.prev=t&&t.e,v.e.next=r&&r.e,null===t?e.first=v:(t.next=v,t.e.next=v.e),null!==r&&(r.prev=v,r.e.prev=v.e),v}finally{}}function Ne(n,e,t){for(var r=n.next?n.next.e.nodes_start:t,l=e?e.e.nodes_start:t,o=n.e.nodes_start;o!==r;){var i=V(o);l.before(o),o=i}}function $e(n,e,t){null===e?n.first=t:(e.next=t,e.e.next=t&&t.e),null!==t&&(t.prev=e,t.e.prev=e&&e.e)}function je(n,e,t,r){var o=n.__attributes??(n.__attributes={});o[e]!==(o[e]=t)&&("style"===e&&"__styles"in n&&(n.__styles={}),"loading"===e&&(n[S]=t),null==t?n.removeAttribute(e):"string"!=typeof t&&function(n){var e,t=Me.get(n.nodeName);if(t)return t;Me.set(n.nodeName,t=[]);var r=n,o=Element.prototype;for(;o!==r;){for(var i in e=l(r))e[i].set&&t.push(i);r=u(r)}return t}(n).includes(e)?n[e]=t:n.setAttribute(e,t))}var Me=new Map;function Pe(n,e,t){if(t){if(n.classList.contains(e))return;n.classList.add(e)}else{if(!n.classList.contains(e))return;n.classList.remove(e)}}function Te(n,e,t=e){var r=Jn();fe(n,"input",(l=>{var o=l?n.defaultValue:n.value;if(o=Ae(n)?De(o):o,t(o),r&&o!==(o=e())){var i=n.selectionStart,u=n.selectionEnd;n.value=o??"",null!==u&&(n.selectionStart=i,n.selectionEnd=Math.min(u,n.value.length))}})),null==ee(e)&&n.value&&t(Ae(n)?De(n.value):n.value),rn((()=>{var t=e();Ae(n)&&t===De(n.value)||("date"!==n.type||t||n.value)&&t!==n.value&&(n.value=t??"")}))}function Ae(n){var e=n.type;return"number"===e||"range"===e}function De(n){return""===n?null:+n}function qe(n=!1){const e=Fn,t=e.l.u;if(!t)return;let r=()=>function(n){if("object"==typeof n&&n&&!(n instanceof EventTarget))if(b in n)ie(n);else if(!Array.isArray(n))for(let e in n){const t=n[e];"object"==typeof t&&t&&b in t&&ie(t)}}(e.s);if(n){let n=0,t={};const l=W((()=>{let r=!1;const l=e.s;for(const n in l)l[n]!==t[n]&&(t[n]=l[n],r=!0);return r&&n++,n}));r=()=>ne(l)}var l;t.b.length&&(l=()=>{Ce(e,r),f(t.b)},X(),rn(l)),en((()=>{const n=ee((()=>t.m.map(s)));return()=>{for(const e of n)"function"==typeof e&&e()}})),t.a.length&&en((()=>{Ce(e,r),f(t.a)}))}function Ce(n,e){if(n.l.s)for(const t of n.l.s)ne(t);e()}let Le=!1;function Re(n,e,t){const r=t[e]??(t[e]={store:null,source:M(void 0),unsubscribe:a});if(r.store!==n)if(r.unsubscribe(),r.store=n??null,null==n)r.source.v=void 0,r.unsubscribe=a;else{var l=!0;r.unsubscribe=function(n,e,t){if(null==n)return e(void 0),a;const r=ee((()=>n.subscribe(e,t)));return r.unsubscribe?()=>r.unsubscribe():r}(n,(n=>{l?r.source.v=n:T(r.source,n)})),l=!1}return ne(r.source)}function ze(){const n={};return function(n){const e=nn(8,null,!1);re(e,p),e.teardown=n}((()=>{for(var e in n){n[e].unsubscribe()}})),n}function Fe(n){for(var e=Tn,t=Tn;null!==e&&!(96&e.f);)e=e.parent;try{return An(e),n()}finally{An(t)}}function Ie(n,e,t,l){var o,i,u=!!(1&t),a=!N||!!(2&t),s=!!(8&t),f=!!(16&t),c=!1;s?[i,c]=function(n){var e=Le;try{return Le=!1,[n(),Le]}finally{Le=e}}((()=>n[e])):i=n[e];var v,d=b in n||x in n,p=(null==(o=r(n,e))?void 0:o.set)??(d&&s&&e in n?t=>n[e]=t:void 0),h=l,m=!0,g=!1,y=()=>(g=!0,m&&(m=!1,h=f?ee(l):l),h);if(void 0===i&&void 0!==l&&(p&&a&&function(){throw new Error("https://svelte.dev/e/props_invalid_value")}(),i=y(),p&&p(i)),a)v=()=>{var t=n[e];return void 0===t?y():(m=!0,g=!1,t)};else{var _=Fe((()=>(u?W:Z)((()=>n[e]))));_.f|=131072,v=()=>{var n=ne(_);return void 0!==n&&(h=void 0),void 0===n?h:n}}if(!(4&t))return v;if(p){var w=n.$$legacy;return function(n,e){return arguments.length>0?(a&&e&&!w&&!c||p(e?v():n),n):v()}}var S=!1,E=M(i),k=Fe((()=>W((()=>{var n=v(),e=ne(E);return S?(S=!1,e):E.v=n}))));return u||(k.equals=O),function(n,e){if(arguments.length>0){const t=e?ne(k):a&&s?C(n):n;return k.equals(t)||(S=!0,T(E,t),g&&void 0!==h&&(h=t),ee((()=>ne(k)))),n}return ne(k)}}function Je(n){var e,t;null===Fn&&function(){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}(),N&&null!==Fn.l?(e=Fn,t=e.l,t.u??(t.u={a:[],b:[],m:[]})).m.push(n):en((()=>{const e=ee(n);if("function"==typeof e)return e}))}const Ve=[];const Be=function(n,e=a){let t=null;const r=new Set;function l(e){if(k(n,e)&&(n=e,t)){const e=!Ve.length;for(const t of r)t[1](),Ve.push(t,n);if(e){for(let n=0;n<Ve.length;n+=2)Ve[n][0](Ve[n+1]);Ve.length=0}}}function o(e){l(e(n))}return{set:l,update:o,subscribe:function(i,u=a){const s=[i,u];return r.add(s),1===r.size&&(t=e(l,o)||a),i(n),()=>{r.delete(s),0===r.size&&t&&(t(),t=null)}}}}({});"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("5"),N=!0;let He=C({repid:"",pid:"",rid:""});function Ke(n,e,t){e(),t()}var We=me("<input>"),Ze=me('<button class="m-btn m-cancel">cancel</button>'),Ye=me('to <span class="m-at"> </span>',1),Ge=me('<div class="m-submit"><div class="m-input"></div> <div class="m-content"><textarea spellcheck="false" rows="5" placeholder="Currently does not support markdown. ♥️ "></textarea> <div class="m-state"><span class="m-word"> </span> <span class="m-limit"></span></div></div> <div class="m-tool"><!> <button class="m-send m-btn">Submit <!></button></div></div>');function Qe(n,e){le(e,!0);const t=ze(),r=Re(Be,"$options",t),l="email",o="site",i="content",u=/^\w+([-.]\w+)*@\w+([-.]\w+)*(\.[a-z]{2,8})+$/,a=/^(https?:\/\/)?(?:www\.)?([a-zA-Z0-9-]+(\.[a-zA-Z]{2,6})+)/;let s={},f=Ie(e,"at",3,"");Je((()=>{!function(){try{s=JSON.parse(localStorage.getItem("Memo_Form"))||{};for(const[n,e]of Object.entries(s))v[n].value=e||""}catch(n){s={}}}(),d()}));const c=[{name:"name",placeholder:"nick* ( 2-8 )",type:"text"},{name:l,placeholder:"email* ( @ )",type:l},{name:o,placeholder:"site ( https? )",type:o}];let v=C({name:{value:"",is:!1,limit:8},email:{value:"",is:!1},site:{value:"",is:!0},content:{value:"",is:!1}});function d(){const{name:n,email:e,site:t,content:r}=v,l=n=>n.value.length;l(n)>1&&l(n)<n.limit?n.is=!0:n.is=!1,l(e)>1&&u.test(e.value)?e.is=!0:e.is=!1,0===l(t)||l(t)>1&&a.test(t.value)?t.is=!0:t.is=!1,l(r)>2&&l(r)<=100?r.is=!0:r.is=!1}function p(){for(const[n,e]of Object.entries(v))s[n]=e.value.trim();localStorage.Memo_Form=JSON.stringify(s)}function h(){He.pid="",He.rid="",He.repid=""}var m=Ge(),g=B(m);Ee(g,21,(()=>c),Se,((n,e)=>{var t=We();t.__input=[Ke,p,d],ln((()=>{var n,r,l,o;je(t,"type",ne(e).type),n=t,r=`m-${ne(e).name??""}`,l=n.__className,o=function(n){return null==n?"":n}(r),l!==o&&(null==r?n.removeAttribute("class"):n.className=o,n.__className=o),je(t,"placeholder",ne(e).placeholder),Pe(t,"m-error",!v[ne(e).name].is)})),Te(t,(()=>v[ne(e).name].value),(n=>v[ne(e).name].value=n)),ge(n,t)}));var y=K(g,2),_=B(y);je(_,"name",i),_.__input=[Ke,p,d];var w=B(K(_,2)),b=B(w);K(w,2).textContent=100;var x=B(K(y,2)),S=n=>{var e=Ze();e.__click=h,ge(n,e)};xe(x,(n=>{He.repid&&n(S)}));var E=K(x,2);E.__click=async function(){const n={path:location.pathname,name:v.name.value,email:v.email.value,site:v.site.value,body:v.content.value,pid:He.pid,rid:He.rid};console.log(n);const e=await fetch(`${r.url}/comment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),t=await e;console.log(t)};var k=K(B(E)),O=n=>{var e=Ye(),t=B(K(H(e)));ln((()=>ye(t,f()))),ge(n,e)};xe(k,(n=>{f()&&n(O)})),ln((()=>{Pe(y,"m-error",!v[i].is),ye(b,v.content.value.length)})),Te(_,(()=>v.content.value),(n=>v.content.value=n)),ge(n,m),oe()}de(["input","click"]);var Ue=me("<a> </a>"),Xe=(n,e,t)=>{e()(ne(t)._id,ne(t).pid)},nt=me('<span class="m-at"> </span>'),et=(n,e)=>{e(!0)},tt=me('<button class="m-remand">Expand the remaining <span class="m-more-count"> </span> comments</button>'),rt=me("<!> <!>",1),lt=me('<div class="m-card"><div class="m-head"><div class="m-info"><div class="m-nick"><!> </div> <time class="m-meta"> </time></div> <button class="m-reply">回复</button></div> <div class="m-comment"><div class="m-body"><!> </div> <!> <!></div></div>');function ot(n,e){le(e,!0);let t=Ie(e,"isMore",7,!1),r=Ie(e,"onReply",3,((n,e)=>{He.pid=e||n,He.rid=e?n:"",He.repid=n||e}));var l,o,i,u=(l=document.createDocumentFragment(),o=document.createComment(""),i=I(),l.append(o,i),he(o,i),l);Ee(H(u),17,(()=>e.list),Se,((n,e)=>{var l=lt(),o=B(l),i=B(o),u=B(i),a=B(u),s=n=>{var t=Ue(),r=B(t);ln((()=>{je(t,"href",ne(e).site),ye(r,ne(e).name)})),ge(n,t)};xe(a,(n=>{ne(e).site&&n(s)}));var f=K(a),c=K(u,2);ln((()=>je(c,"datetime",new Date(ne(e).date).toString())));var v=B(c);ln((()=>ye(v,function(n){const e=new Date(n),t=n=>String(n).padStart(2,"0"),[r,l,o,i,u]=[e.getFullYear(),t(e.getMonth()+1),t(e.getDate()),t(e.getHours()),t(e.getMinutes())];return`${r}-${l}-${o} ${i}:${u}`}(ne(e).date)))),K(i,2).__click=[Xe,r,e];var d=B(K(o,2)),p=B(d),h=n=>{var t=nt(),r=B(t);ln((()=>ye(r,ne(e).at))),ge(n,t)};xe(p,(n=>{ne(e).at&&n(h)}));var m=K(p),g=K(d,2),y=n=>{Qe(n,{get at(){return ne(e).name}})};xe(g,(n=>{He.repid===ne(e)._id&&n(y)}));var _=K(g,2),w=n=>{var r=rt(),l=H(r),o=W((()=>t()?ne(e).reply:ne(e).reply.slice(0,3)));ot(l,{get list(){return ne(o)}});var i=K(l,2),u=n=>{var r=tt();r.__click=[et,t];var l=K(B(r)),o=B(l);ln((()=>ye(o,ne(e).reply.length-3))),ge(n,r)};xe(i,(n=>{!t()&&ne(e).reply.length>3&&n(u)})),ge(n,r)};xe(_,(n=>{ne(e).reply&&ne(e).reply.length&&n(w)})),ln((()=>{ye(f,` ${ne(e).name??""}`),ye(m,` ${ne(e).body??""}`)})),ge(n,l)})),ge(n,u),oe()}de(["click"]);var it=me('<div class="m-cards"><!></div>');function ut(n,e){le(e,!1);const t=ze();let r=Re(Be,"$options",t),l=[],o=function(n,e=!1){return P(M(n,e))}([]);var i,u,a,s;Je((()=>{!async function(){const{ok:n,data:e,message:t}=await(async n=>{const e=await fetch(n),t=await e.json();return console.log(t),t})(`${r.url}/comment/0/5?p=${r.path}`);if(!n)throw new Error(t);T(o,[...e,...ne(o)]),console.log("commentlist:",ne(o))}()})),i=()=>ne(o),u=()=>{T(o,[...l,...ne(o)])},s={effect:null,ran:!1},(a=Fn).l.r1.push(s),s.effect=rn((()=>{i(),s.ran||(s.ran=!0,T(a.l.r2,!0),ee(u))})),function(){var n=Fn;rn((()=>{if(ne(n.l.r2)){for(var e of n.l.r1){var t=e.effect;t.f&p&&re(t,m),Vn(t)&&Zn(t),e.ran=!1}n.l.r2.v=!1}}))}(),qe();var f=it();ot(B(f),{get list(){return ne(o)}}),ge(n,f),oe()}var at=me('<h2 class="m-title">发表评论</h2> <!>',1),st=me('<div id="щ"><h2 class="m-title">文章评论</h2> <!> <!></div>');function ft(n,e){le(e,!1),qe();var t=st(),r=K(B(t),2);ut(r,{});var l=K(r,2),o=n=>{var e=at();Qe(K(H(e),2),{}),ge(n,e)};xe(l,(n=>{He.repid||n(o)})),ge(n,t),oe()}return class{constructor(n){n=n||{};const e={url:"/",el:"memo-talk",path:location.pathname,vist:!0};Be.set(Object.assign(e,n)),_e(ft,{target:document.getElementById(n.el)})}}}));
